import{_ as k}from"./Menu.vue.69109358.js";import{a as v,b as I,o as c,e as r,f as t,u as e,w,h as f,v as p,i as b,F as C,r as V,t as $,j as P,k as G,l as S,m as A,p as M,q as m}from"./entry.230716bf.js";import{u as D}from"./auth.be8628dd.js";import{u as U,a as h}from"./config.5c5d946d.js";import"./nuxt-link.3b6951aa.js";const N={class:"container"},E=t("h2",{class:"pb-4 pt-3"},"Channel Configuration",-1),T={style:{width:"100%",height:"43px"}},B={class:"float-end"},F=["onSubmit"],L={class:"mb-3 row"},H=t("label",{for:"configName",class:"col-sm-2 col-form-label"},"Name",-1),R={class:"col-sm-10"},j={class:"mb-3 row"},q=t("label",{for:"configUrl",class:"col-sm-2 col-form-label"},"Preview URL",-1),z={class:"col-sm-10"},J={class:"mb-3 row"},K=t("label",{for:"configPath",class:"col-sm-2 col-form-label"},"Config Path",-1),O={class:"col-sm-10"},Q={class:"mb-3 row"},W=t("label",{for:"configExtensions",class:"col-sm-2 col-form-label"},"Extra Extensions",-1),X={class:"col-sm-10"},Y={class:"mb-3 row"},Z=t("label",{for:"configService",class:"col-sm-2 col-form-label"},"Service",-1),tt={class:"col-sm-10"},st={class:"row"},ot={class:"col-1",style:{"min-width":"158px"}},et={class:"btn-group"},nt=t("button",{class:"btn btn-primary",type:"submit"},"Save",-1),lt=v({__name:"GuiConfig",setup(y){const{$_:u}=I(),d=D(),s=U(),l=h();async function _(){const n=u.cloneDeep(s.configGui),o=u.cloneDeep(s.configGui[s.configGui.length-1]),i=o.config_path.match(/.*\//),x=`channel${String(n.length+1).padStart(3,"0")}`;o.id=n.length+1,o.name=`Channel ${Math.random().toString(36).substring(7)}`,o.config_path=`${i}${x}.yml`,o.service=`ffplayout@${x}.service`,n.push(o),s.updateGuiConfig(n),s.updateConfigID(s.configGui.length-1)}async function a(){(await s.setGuiConfig(s.configGui[s.configID])).status?(l.alertVariant="alert-success",l.alertMsg="Update GUI config success!"):(l.alertVariant="alert-danger",l.alertMsg="Update GUI config failed!"),l.showAlert=!0,setTimeout(()=>{l.showAlert=!1},2e3)}async function g(){const n=u.cloneDeep(s.configGui),o=n[s.configID].id;if(o===1){l.alertVariant="alert-warning",l.alertMsg="First channel can not be deleted!",l.showAlert=!0;return}const i=await fetch(`/api/channel/${o}`,{method:"DELETE",headers:d.authHeader});n.splice(s.configID,1),s.updateGuiConfig(n),s.updateConfigID(s.configGui.length-1),await s.getPlayoutConfig(),i.status===200?(l.alertVariant="alert-success",l.alertMsg="Delete GUI config success!"):(l.alertVariant="alert-danger",l.alertMsg="Delete GUI config failed!"),l.showAlert=!0,setTimeout(()=>{l.showAlert=!1},2e3)}return(n,o)=>(c(),r("div",null,[t("div",N,[E,t("div",T,[t("div",B,[t("button",{class:"btn btn-primary",onClick:o[0]||(o[0]=i=>_())},"Add new Channel")])]),e(s).configGui&&e(s).configGui[e(s).configID]?(c(),r("form",{key:0,onSubmit:w(a,["prevent"])},[t("div",L,[H,t("div",R,[f(t("input",{type:"text",class:"form-control",id:"configName","onUpdate:modelValue":o[1]||(o[1]=i=>e(s).configGui[e(s).configID].name=i)},null,512),[[p,e(s).configGui[e(s).configID].name]])])]),t("div",j,[q,t("div",z,[f(t("input",{type:"text",class:"form-control",id:"configUrl","onUpdate:modelValue":o[2]||(o[2]=i=>e(s).configGui[e(s).configID].preview_url=i)},null,512),[[p,e(s).configGui[e(s).configID].preview_url]])])]),t("div",J,[K,t("div",O,[f(t("input",{type:"text",class:"form-control",id:"configPath","onUpdate:modelValue":o[3]||(o[3]=i=>e(s).configGui[e(s).configID].config_path=i)},null,512),[[p,e(s).configGui[e(s).configID].config_path]])])]),t("div",Q,[W,t("div",X,[f(t("input",{type:"text",class:"form-control",id:"configExtensions","onUpdate:modelValue":o[4]||(o[4]=i=>e(s).configGui[e(s).configID].extra_extensions=i)},null,512),[[p,e(s).configGui[e(s).configID].extra_extensions]])])]),t("div",Y,[Z,t("div",tt,[f(t("input",{type:"text",class:"form-control",id:"configService","onUpdate:modelValue":o[5]||(o[5]=i=>e(s).configGui[e(s).configID].service=i),disabled:""},null,512),[[p,e(s).configGui[e(s).configID].service]])])]),t("div",st,[t("div",ot,[t("div",et,[nt,e(s).configGui.length>1&&e(s).configGui[e(s).configID].id>1?(c(),r("button",{key:0,class:"btn btn-danger",onClick:o[6]||(o[6]=i=>g())}," Delete ")):b("",!0)])])])],40,F)):b("",!0)])]))}}),it={class:"container"},at=t("h2",{class:"pb-4 pt-3"},"Playout Configuration",-1),ct=["onSubmit"],rt={class:"col-sm-1"},dt={class:"col-sm-11 pb-4 mt-4"},ut={class:"mb-2 row"},ft=["for"],pt={class:"col-sm-10"},_t={key:0,class:"pt-2 pb-2"},gt=["id","onUpdate:modelValue"],mt=["id","onUpdate:modelValue"],bt=["id","onUpdate:modelValue"],vt=["id","onUpdate:modelValue"],ht=["id","onUpdate:modelValue"],yt=["id","onUpdate:modelValue"],$t=t("div",{class:"row"},[t("div",{class:"col-1",style:{"min-width":"85px"}},[t("button",{class:"btn btn-primary",type:"submit",variant:"primary"},"Save")])],-1),wt=v({__name:"PlayoutConfig",setup(y){const u=U(),d=h();async function s(){(await u.setPlayoutConfig(u.configPlayout)).status===200?(d.alertVariant="alert-success",d.alertMsg="Update playout config success!"):(d.alertVariant="alert-danger",d.alertMsg="Update playout config failed!"),d.showAlert=!0,setTimeout(()=>{d.showAlert=!1},2e3)}return(l,_)=>(c(),r("div",null,[t("div",it,[at,e(u).configPlayout?(c(),r("form",{key:0,onSubmit:w(s,["prevent"])},[(c(!0),r(C,null,V(e(u).configPlayout,(a,g)=>(c(),r("div",{class:"mb-2 row",key:g},[t("div",rt,[t("strong",null,$(g)+":",1)]),t("div",dt,[(c(!0),r(C,null,V(a,(n,o)=>(c(),r("div",ut,[t("label",{for:o,class:"col-sm-2 col-form-label"},$(o)+":",9,ft),t("div",pt,[o.toString()==="help_text"?(c(),r("div",_t,$(n),1)):o.toString()==="sender_pass"?f((c(),r("input",{key:1,type:"password",class:"form-control",id:o,"onUpdate:modelValue":i=>a[o]=i},null,8,gt)),[[p,a[o]]]):o.toString()==="output_param"||o.toString()==="custom_filter"?f((c(),r("textarea",{key:2,class:"form-control",id:o,"onUpdate:modelValue":i=>a[o]=i,rows:"5"},null,8,mt)),[[p,a[o]]]):typeof n=="number"&&n%1===0?f((c(),r("input",{key:3,type:"number",class:"form-control",id:o,"onUpdate:modelValue":i=>a[o]=i,style:{"max-width":"250px"}},null,8,bt)),[[p,a[o]]]):typeof n=="number"?f((c(),r("input",{key:4,type:"number",class:"form-control",id:o,"onUpdate:modelValue":i=>a[o]=i,step:"0.0001",style:{"max-width":"250px"}},null,8,vt)),[[p,a[o]]]):typeof n=="boolean"?f((c(),r("input",{key:5,type:"checkbox",class:"form-check-input mt-2",id:o,"onUpdate:modelValue":i=>a[o]=i},null,8,ht)),[[P,a[o]]]):f((c(),r("input",{key:6,type:"text",class:"form-control",id:o,"onUpdate:modelValue":i=>a[o]=i},null,8,yt)),[[p,a[o]]])])]))),256))])]))),128)),$t],40,ct)):b("",!0)])]))}}),Ut={class:"container"},xt=t("h2",{class:"pb-4 pt-3"},"User Configuration",-1),Ct=["onSubmit"],Vt={class:"mb-3 row"},Gt=t("label",{for:"userName",class:"col-sm-2 col-form-label"},"Username",-1),St={class:"col-sm-10"},Dt={class:"mb-3 row"},kt=t("label",{for:"userMail",class:"col-sm-2 col-form-label"},"mail",-1),It={class:"col-sm-10"},Pt={class:"mb-3 row"},At=t("label",{for:"userPass1",class:"col-sm-2 col-form-label"},"New Password",-1),Mt={class:"col-sm-10"},Nt={class:"mb-3 row"},Et=t("label",{for:"userPass2",class:"col-sm-2 col-form-label"},"Confirm Password",-1),Tt={class:"col-sm-10"},Bt=t("div",{class:"row"},[t("div",{class:"col-1",style:{"min-width":"85px"}},[t("button",{class:"btn btn-primary",type:"submit"},"Save")])],-1),Ft=v({__name:"UserConfig",setup(y){const u=D(),d=U(),s=h(),l=G(""),_=G("");async function a(){l&&l.value===_.value&&(d.configUser.password=l.value),u.inspectToken(),(await d.setUserConfig(d.configUser)).status===200?(s.alertVariant="alert-success",s.alertMsg="Update user profile success!"):(s.alertVariant="alert-danger",s.alertMsg="Update user profile failed!"),s.showAlert=!0,l.value="",_.value="",setTimeout(()=>{s.showAlert=!1},2e3)}return(g,n)=>(c(),r("div",null,[t("div",Ut,[xt,e(d).configUser?(c(),r("form",{key:0,onSubmit:w(a,["prevent"])},[t("div",Vt,[Gt,t("div",St,[f(t("input",{type:"text",class:"form-control",id:"userName","onUpdate:modelValue":n[0]||(n[0]=o=>e(d).configUser.username=o),disabled:""},null,512),[[p,e(d).configUser.username]])])]),t("div",Dt,[kt,t("div",It,[f(t("input",{type:"text",class:"form-control",id:"userMail","onUpdate:modelValue":n[1]||(n[1]=o=>e(d).configUser.mail=o)},null,512),[[p,e(d).configUser.mail]])])]),t("div",Pt,[At,t("div",Mt,[f(t("input",{type:"password",class:"form-control",id:"userPass1","onUpdate:modelValue":n[2]||(n[2]=o=>S(l)?l.value=o:null)},null,512),[[p,e(l)]])])]),t("div",Nt,[Et,t("div",Tt,[f(t("input",{type:"password",class:"form-control",id:"userPass2","onUpdate:modelValue":n[3]||(n[3]=o=>S(_)?_.value=o:null)},null,512),[[p,e(_)]])])]),Bt],40,Ct)):b("",!0)])]))}}),Lt={class:"container-fluid configure-container"},Ht={class:"d-flex align-items-start config-tab"},Rt={class:"nav flex-column nav-pills me-3",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"},jt={class:"tab-content",id:"v-pills-tabContent"},qt={class:"tab-pane show active",id:"v-pills-gui",role:"tabpanel","aria-labelledby":"v-pills-gui-tab"},zt={class:"config-container"},Jt={class:"tab-pane",id:"v-pills-playout",role:"tabpanel","aria-labelledby":"v-pills-playout-tab"},Kt={class:"config-container"},Ot={class:"tab-pane",id:"v-pills-user",role:"tabpanel","aria-labelledby":"v-pills-user-tab"},Qt={class:"config-container"},ss=v({__name:"configure",setup(y){A({title:"Configuration | ffplayout"});const u=h();return M(()=>{u.resetAlert()}),(d,s)=>{const l=k,_=lt,a=wt,g=Ft;return c(),r("div",null,[m(l),t("div",Lt,[t("div",Ht,[t("div",Rt,[t("button",{class:"nav-link active",id:"v-pills-gui-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-gui",type:"button",role:"tab","aria-controls":"v-pills-gui","aria-selected":"true",onClick:s[0]||(s[0]=n=>e(u).resetAlert())}," GUI "),t("button",{class:"nav-link",id:"v-pills-playout-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-playout",type:"button",role:"tab","aria-controls":"v-pills-playout","aria-selected":"false",onClick:s[1]||(s[1]=n=>e(u).resetAlert())}," Playout "),t("button",{class:"nav-link",id:"v-pills-user-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-user",type:"button",role:"tab","aria-controls":"v-pills-user","aria-selected":"false",onClick:s[2]||(s[2]=n=>e(u).resetAlert())}," User ")]),t("div",jt,[t("div",qt,[t("div",zt,[m(_)])]),t("div",Jt,[t("div",Kt,[m(a)])]),t("div",Ot,[t("div",Qt,[m(g)])])])])])])}}});export{ss as default};
